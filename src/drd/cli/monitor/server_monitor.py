import threading\nimport subprocess\nfrom queue import Queue\nfrom .input_handler import InputHandler\nfrom .output_monitor import OutputMonitor\nfrom ...utils import print_info, print_success, print_error, print_header, print_prompt\n\nMAX_RETRIES = 3\n\n\nclass DevServerMonitor:\n    def __init__(self, project_dir: str, error_handlers: dict, command: str):\n        self.project_dir = project_dir\n        self.error_handlers = error_handlers\n        self.command = command\n        self.process = None\n        self.output_queue = Queue()\n        self.should_stop = threading.Event()\n        self.restart_requested = threading.Event()\n        self.user_input_queue = Queue()\n        self.processing_input = threading.Event()\n        self.input_handler = InputHandler(self)\n        self.output_monitor = OutputMonitor(self)\n        self.retry_count = 0\n\n    def start(self):\n        self.should_stop.clear()\n        self.restart_requested.clear()\n        print_header(\